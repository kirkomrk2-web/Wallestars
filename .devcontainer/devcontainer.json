  {
    "name": "Wallestars Dev Container",
    "image": "mcr.microsoft.com/devcontainers/typescript-node:20",

    "features": {
      "ghcr.io/devcontainers/features/docker-in-docker:2": {},
      "ghcr.io/devcontainers/features/git:1": {}
    },

    "customizations": {
      "vscode": {
        "extensions": [
          "dbaeumer.vscode-eslint",
          "esbenp.prettier-vscode",
          "bradlc.vscode-tailwindcss",
          "dsznajder.es7-react-js-snippets"
        ],
        "settings": {
          "editor.formatOnSave": true,
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        }
      }
    },

    "postCreateCommand": "npm install && cp .env.example .env",

    "forwardPorts": [5173, 3000, 3001],

    "portsAttributes": {
      "5173": {
        "label": "Frontend (Vite)",
        "onAutoForward": "openBrowser"
      },
      "3000": {
        "label": "Backend API"
      },
      "3001": {
        "label": "WebSocket"
      }
    },

    "remoteEnv": {
      "ANTHROPIC_API_KEY": "${localEnv:ANTHROPIC_API_KEY}",
      "ENABLE_COMPUTER_USE": "false",
      "ENABLE_ANDROID": "false",
      "NODE_ENV": "development"
    },

    "runArgs": ["--privileged"],

    "mounts": [
      "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ]
  }
